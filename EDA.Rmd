---
title: "EDA"
author: "Grupo 11"
date: "2025-10-06"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Análisis Descriptivo de los datos

## Lectura de los datos

```{r}
#install.packages("dplyr")
library(dplyr)
```

```{r}
train <- read.csv("train.csv", header = TRUE, sep = ",")
train$ID<-NA
test  <- read.csv("test.csv", header = TRUE, sep = ",")
datos <- bind_rows(train, test)
write.csv(datos, "datos_origen.csv", row.names = FALSE)

dim(datos)       
head(datos)       
summary(datos)   
```
Hemos puesto ID de train como NA ya que a nosotros nos interesa test, despues en imputacion por missings lo imputaremos aleatoriamente. Hacemos esto para no repetir valores ID.

## Tipos de variables
```{r}
clases <- sapply(datos, class)
datos$HasCrCard <- as.factor(datos$HasCrCard)
datos$IsActiveMember <- as.factor(datos$IsActiveMember)
datos$SavingsAccountFlag <- as.factor(datos$SavingsAccountFlag)

clases <- sapply(datos, class)
varNum <- names(clases)[which(clases %in% c("numeric", "integer"))]
varCat <- names(clases)[which(clases %in% c("character", "factor"))]
```

## Numéricas

```{r}
#install.packages("psych")
library(psych)
psych::describe(datos[, varNum])
```

```{r}
par(mfrow = c(2, 4))  
for (var in varNum) {
  hist(datos[, var], main = paste0("Histograma variable ", var))
  boxplot(datos[, var], main = paste0("Boxplot variable ", var))
}
```

## Categóricas
```{r}
for (var in varCat) {
  tablaAbs <- data.frame(table(datos[, var]))
  tablaFreq <- data.frame(table(datos[, var])/sum(table(datos[, var])))
  m <- match(tablaAbs$Var1, tablaFreq$Var1)
  tablaAbs[, "FreqRel"] <- tablaFreq[m, "Freq"]
  colnames(tablaAbs) <- c("Categoria", "FreqAbs", "FreqRel")
  
  cat("===============", var, "===================================\n")
  print(tablaAbs)
  cat("==================================================\n")
}
```

```{r}
par(mfrow = c(2, 3))  
for (var in varCat) {
  barplot(table(datos[, var]))
}
par(mfrow = c(1, 1))  
```

## Análisis exploratorio Bivariante

### Num vs Num
```{r}
cor(datos[, varNum])
```


### Cat vs Cat
```{r}
for (varc1 in varCat) {
  for (varc2 in varCat) {
    if (varc1 != varc2) {
      prop_table <- prop.table(table(datos[, varc1], datos[, varc2]))
      cat("=============", varc1, " vs. ", varc2, "=========================\n")
      print(prop_table)
    }
  }
}
```

```{r}
par(mfrow = c(3, 3))  
for (varc1 in varCat) {
  for (varc2 in varCat) {
    if (varc1 != varc2) {
      prop_table <- prop.table(table(datos[, varc1], datos[, varc2]))
      barplot(prop_table, beside = TRUE)
    }
  }
}
```

## EDA

```{r}
#install.packages("skimr")
library(skimr)
library(tidyverse)

skim(datos)
```

```{r}
#install.packages("visdat")
library(visdat)

vis_dat(datos)
vis_miss(datos)
```

```{r}
datos %>% select(where(is.numeric)) %>% 
  vis_cor()
```

```{r}
#install.packages("inspectdf")
library(inspectdf)

inspect_types(datos) %>% show_plot()
```

```{r}
inspect_num(datos) %>% show_plot()
```

```{r}
inspect_cat(datos) %>% show_plot()
```




